<div class="content d-flex flex-column flex-column-fluid">
  <div class="row col-md-12 mt-3">
    <div class="col-md-6">
        <sub-header [title]="'Purchase Entry Report' | localize"></sub-header>
    </div>
    <div class="col-md-3">
        <select (change)="searchData()" *ngIf="tab == 'Detailed'" [(ngModel)]="code"
            class="form-select form-select-solid form-select-lg fw-bold " style="border-color: #E4E6EF;">
            <option value="VATPUR000">Select a Type...</option>
            <option *ngFor="let type of reportType" [value]="type.code">
                {{ type.reportName }}
            </option>
        </select>
    </div>
    <div class="col-md-3">

        <input class="form-control" id="StartEndRange" name="StartEndRange" #drp="bsDaterangepicker"
            readonly="readonly" bsDaterangepickerÂ  [bsConfig]="{rangeInputFormat: 'DD/MM/YYYY'}" dateRangePickerLuxonModifier [(date)]="dateRange"
            placement="bottom right" (bsValueChange)="searchData()" />
    </div>
</div>



   
    <div class="app-container container-fluid">
        <div class="card px-0">
            <div class="card-body px-4 py-4">
              
                <div class="row">
                    <div class="col-lg-3 mb-3 px-5">
                      <div class="div10">
                        <span>
                          <a [ngClass]="
                                     tab == 'Detailed'
                                            ? 'blockquote w-100  fw-bolder '
                                            : 'blockquote w-100 fw-bolder text-dark'
                                    " data-bs-toggle="tab" style="color:rgb(32, 170, 248);">
                            Detailed
                          </a>
                        </span>
                        <span class="form-check form-switch mt-1 div12" >
                          <input class="toggle form-check-input" type="checkbox" data-toggle="toggle" [ngModel]="checkboxValue"
                            (ngModelChange)="changeEvent($event)" checked>
                        </span>
                        <span >
                          <a [ngClass]="
                                tab == 'Daywise'
                                       ? 'blockquote w-100  fw-bolder'
                                       : 'blockquote w-100 fw-bolder text-dark'
                               " data-bs-toggle="tab" style="color:rgb(32, 170, 248);">
                            Daywise
                          </a>
                        </span>
                      </div>
                    </div>
          
                    <div class="col-lg-2"></div>
                    <div class="col-lg-7 mb-3">
                      <div class="row">
                        <div class="col-lg-8 mb-3">
                          <span *ngIf="tab=='Detailed'">
                            <input  class="form form-control" pInputText type="text"
                              (input)="dt.filterGlobal($event.target.value, 'contains')"
                              placeholder="Search Credit Note or Invoice Number" />
                          </span>
                        </div>
                        <div class="col-lg-4">
                          <button type="button" class="btn btn-outline btn-outline-success me-1 w-100"
                            (click)="downloadExcel(dt.value)">
                            <i class="far fa-file-excel btn-md-icon"></i>
                            <!-- <span class="d-none d-md-inline-block">
                        {{ 'Download Report' | localize }}
                    </span> -->
                            Download Report</button>
                        </div>
                      </div>
                    </div>
                  </div>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="kt_tab_pane_7" role="tabpanel">
                        <div class="card card-p-0 card-flush">
                            <div class="card-body">
                                <p-table #dt sortMode="multiple" [value]="invoices" [columns]="columns"
                                    [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                    [rowsPerPageOptions]="[5, 10, 15, 20]" [scrollable]="true"
                                    [style]="{ width: '100%' }">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th class='purchaserecords' *ngFor="let col of columns"
                                            pSortableColumn="{{ col.field }}">
                                                {{ col.header | localize }}
                                                <p-sortIcon field="{{ col.field }}"></p-sortIcon>
                                            </th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-record="$implicit" let-columns="columns">
                                        <tr [pSelectableRow]="record">
                                            <td class='purchaserecords' *ngFor="let col of columns">
                                                <span *ngIf="col.field == 'invoiceDate'">
                                                    {{ record.invoiceDate }}
                                                </span>
                                                <span *ngIf="col.field != 'invoiceDate'">
                                                    {{ record[col.field] }}
                                                </span>
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="footer">
                                        <tr *ngIf="tab == 'Detailed'">
                                            <td>Total</td>
                                            <td *ngIf="code!='VATPUR000' "></td>
                                            <td></td>
                                            <td class='purchaserecords'>
                                                {{ detailedwiseFooter.taxable.toFixed(2) }}
                                            </td>
                                            <td class='purchaserecords'>
                                                {{ detailedwiseFooter.zero.toFixed(2) }}
                                            </td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.exempt.toFixed(2) }}</td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.outofscope.toFixed(2) }}
                                            </td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.import.toFixed(2) }}</td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.rcm.toFixed(2) }}</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.customPaid.toFixed(2) }}
                                            </td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.excisetax.toFixed(2) }}
                                            </td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.other.toFixed(2) }}</td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.vatAmount.toFixed(2) }}
                                            </td>
                                            <td class='purchaserecords'>{{ detailedwiseFooter.totalAmount.toFixed(2) }}
                                            </td>
                                        </tr>
                                        <tr *ngIf="tab == 'Daywise'">
                                            <td>
                                                Total
                                              </td>
                                              <td class="purchaserecords" >{{daywiseFooter.tcount}}</td>
                                              <td class="purchaserecords" >{{daywiseFooter.taxable.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.exempt.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.import.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.rcm.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.zero.toFixed(2)}}</td>
                                              <td></td>
                                              <td class="purchaserecords">{{daywiseFooter.custom.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.excisetax.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.other.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.OutofScope.toFixed(2)}}</td>
                                              <td></td>
                                              <td></td>
                                              <td class="purchaserecords">{{daywiseFooter.vatAmount.toFixed(2)}}</td>
                                              <td class="purchaserecords">{{daywiseFooter.tAmount.toFixed(2)}}</td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="paginatorleft"></ng-template>
                                </p-table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>