<div [@routerTransition]>
    <sub-header [title]="'Settings' | localize" [description]="'SettingsHeaderInfo' | localize"></sub-header>

    <div [class]="containerClass">
        <div class="card card-custom gutter-b">
            <div class="card-body">
                <tabset *ngIf="settings">
                    <tab
                        class="p-5"
                        heading="{{ 'General' | localize }}"
                        *ngIf="showTimezoneSelection"
                        [active]="activeTabIndex == 0"
                    >
                        <div class="mb-5" *ngIf="showTimezoneSelection">
                            <label for="Timezone" class="form-label">{{ 'Timezone' | localize }}</label>
                            <timezone-combo
                                name="Timezone"
                                [(ngModel)]="settings.general.timezone"
                                defaultTimezoneScope="{{ defaultTimezoneScope }}"
                            ></timezone-combo>
                        </div>
                    </tab>
                    <tab
                        class="p-5"
                        *ngIf="true"
                        heading="{{ 'Appearance' | localize }}"
                        [active]="activeTabIndex == 1"
                    >
                        <div class="row m-form">
                            <div class="col-md-6">
                                <h5 class="mt-5">{{ 'ApplicationLogo' | localize }}</h5>
                                <form #logoUploadForm>
                                    <div
                                        class="mb-5"
                                        *ngIf="appSession.tenant.logoId"
                                        style="
                                            background: url(/assets/common/images/transparent_background.png);
                                            width: 50%;
                                            padding: 5px;
                                        "
                                    >
                                        <a
                                            [href]="
                                                remoteServiceBaseUrl +
                                                '/TenantCustomization/GetLogo?tenantId=' +
                                                appSession.tenant.id
                                            "
                                            target="_blank"
                                        >
                                            <img
                                                height="38"
                                                [src]="
                                                    remoteServiceBaseUrl +
                                                    '/TenantCustomization/GetLogo?tenantId=' +
                                                    appSession.tenant.id
                                                "
                                            />
                                        </a>
                                    </div>

                                    <div class="input-group mb-3">
                                        <div class="custom-file">
                                            <input
                                                type="file"
                                                class="custom-file-input"
                                                id="uploadLogoInput"
                                                ng2FileSelect
                                                [uploader]="logoUploader"
                                                (change)="onUploadLogoInputChange($event.target.files)"
                                            />
                                            <label
                                                class="custom-file-label"
                                                #uploadLogoInputLabel
                                                for="uploadLogoInput"
                                            >
                                                {{ 'ChooseAFile' | localize }}
                                            </label>
                                        </div>
                                        <span class="form-text text-muted col-lg-12">
                                            {{ 'UploadLogo_Info' | localize }}
                                        </span>
                                    </div>

                                    <button class="btn btn-primary" type="button" (click)="uploadLogo()">
                                        {{ 'Upload' | localize }}
                                    </button>
                                    <button class="btn btn-default" type="button" (click)="clearLogo()">
                                        {{ 'Clear' | localize }}
                                    </button>
                                </form>
                            </div>
                            <div class="col-md-6">
                                <h5 class="mt-5">{{ 'CustomCSS' | localize }}</h5>
                                <p *ngIf="appSession.tenant.customCssId">
                                    <a
                                        [href]="
                                            remoteServiceBaseUrl +
                                            '/TenantCustomization/GetCustomCss?tenantId=' +
                                            appSession.tenant.id
                                        "
                                        target="_blank"
                                    >
                                        {{ 'Download' | localize }}
                                    </a>
                                </p>
                                <form #cssUploadForm>
                                    <div class="input-group mb-3">
                                        <div class="custom-file">
                                            <input
                                                type="file"
                                                class="custom-file-input"
                                                id="uploadCustomCSSInput"
                                                ng2FileSelect
                                                [uploader]="customCssUploader"
                                                (change)="onUploadCustomCSSInputChange($event.target.files)"
                                            />
                                            <label
                                                class="custom-file-label"
                                                #uploadCustomCSSInputLabel
                                                for="uploadCustomCSSInput"
                                            >
                                                {{ 'ChooseAFile' | localize }}
                                            </label>
                                        </div>
                                        <span class="form-text text-muted col-lg-12">
                                            {{ 'UploadCSS_Info' | localize }}
                                        </span>
                                    </div>

                                    <button class="btn btn-primary" type="button" (click)="uploadCustomCss()">
                                        {{ 'Upload' | localize }}
                                    </button>
                                    <button class="btn btn-default" type="button" (click)="clearCustomCss()">
                                        {{ 'Clear' | localize }}
                                    </button>
                                </form>
                            </div>
                        </div>
                    </tab>
                    <tab class="p-5" *ngIf="true" heading="{{ 'UserManagement' | localize }}">
                        <div class="form">
                            <h5 class="mt-5">{{ 'FormBasedRegistration' | localize }}</h5>
                            <div class="mb-5">
                                <label
                                    for="Setting_AllowSelfRegistration"
                                    class="form-check form-check-custom form-check-solid py-1"
                                    style="margin-bottom: 0"
                                >
                                    <input
                                        id="Setting_AllowSelfRegistration"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="AllowSelfRegistration"
                                        [(ngModel)]="settings.userManagement.allowSelfRegistration"
                                    />
                                    <span class="form-check-label">
                                        {{ 'AllowUsersToRegisterThemselves' | localize }}
                                    </span>
                                </label>
                                <span class="form-text text-muted">
                                    {{ 'AllowUsersToRegisterThemselves_Hint' | localize }}
                                </span>
                            </div>
                            <div class="mb-5" [hidden]="!settings.userManagement.allowSelfRegistration">
                                <label
                                    for="Setting_IsNewRegisteredUserActiveByDefault"
                                    class="form-check form-check-custom form-check-solid py-1"
                                    style="margin-bottom: 0"
                                >
                                    <input
                                        id="Setting_IsNewRegisteredUserActiveByDefault"
                                        type="checkbox"
                                        name="IsNewRegisteredUserActiveByDefault"
                                        [(ngModel)]="settings.userManagement.isNewRegisteredUserActiveByDefault"
                                        class="form-check-input"
                                    />
                                    <span class="form-check-label">
                                        {{ 'NewRegisteredUsersIsActiveByDefault' | localize }}
                                    </span>
                                </label>
                                <span class="form-text text-muted">
                                    {{ 'NewRegisteredUsersIsActiveByDefault_Hint' | localize }}
                                </span>
                            </div>
                            <div class="mb-5" [hidden]="!settings.userManagement.allowSelfRegistration">
                                <label
                                    for="Setting_UseCaptchaOnRegistration"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Setting_UseCaptchaOnRegistration"
                                        type="checkbox"
                                        name="UseCaptchaOnRegistration"
                                        [(ngModel)]="settings.userManagement.useCaptchaOnRegistration"
                                        class="form-check-input"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseCaptchaOnRegistration' | localize }}
                                    </span>
                                </label>
                            </div>
                            <div class="mb-5">
                                <label
                                    for="Setting_UseCaptchaOnLogin"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Setting_UseCaptchaOnLogin"
                                        type="checkbox"
                                        name="UseCaptchaOnLogin"
                                        [(ngModel)]="settings.userManagement.useCaptchaOnLogin"
                                        class="form-check-input"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseCaptchaOnLogin' | localize }}
                                    </span>
                                </label>
                            </div>
                            <h5 class="mt-5">{{ 'CookieConsent' | localize }}</h5>
                            <label
                                for="Settings_IsCookieConsentEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Settings_IsCookieConsentEnabled"
                                    class="form-check-input"
                                    type="checkbox"
                                    name="IsCookieConsentEnabled"
                                    [(ngModel)]="settings.userManagement.isCookieConsentEnabled"
                                />
                                <span class="form-check-label">
                                    {{ 'IsCookieConsentEnabled' | localize }}
                                </span>
                            </label>
                            <h5 class="mt-5">{{ 'SessionTimeOut' | localize }}</h5>
                            <label
                                for="Setting_IsSessionTimeOutEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_IsSessionTimeOutEnabled"
                                    class="form-check-input"
                                    type="checkbox"
                                    name="IsEnabled"
                                    [(ngModel)]="settings.userManagement.sessionTimeOutSettings.isEnabled"
                                />
                                <span class="form-check-label">
                                    {{ 'IsSessionTimeOutEnabled' | localize }}
                                </span>
                            </label>
                            <label
                                *ngIf="settings.userManagement.sessionTimeOutSettings.isEnabled"
                                for="Setting_ShowLockScreenWhenTimedOut"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_ShowLockScreenWhenTimedOut"
                                    class="form-check-input"
                                    type="checkbox"
                                    name="IsEnabled"
                                    [(ngModel)]="
                                        settings.userManagement.sessionTimeOutSettings.showLockScreenWhenTimedOut
                                    "
                                />
                                <span class="form-check-label">
                                    {{ 'ShowLockScreenWhenTimedOut' | localize }}
                                </span>
                            </label>
                            <div class="mb-5 pt-1" *ngIf="settings.userManagement.sessionTimeOutSettings.isEnabled">
                                <label class="form-label" for="Setting_SessionTimeOutSecond">
                                    {{ 'SessionTimeOutSecond' | localize }}
                                </label>
                                <input
                                    id="Setting_SessionTimeOutSecond"
                                    type="number"
                                    name="TimeOutSecond"
                                    class="form-control"
                                    min="1"
                                    [ngClass]="{
                                        edited: settings.userManagement.sessionTimeOutSettings.timeOutSecond
                                    }"
                                    [(ngModel)]="settings.userManagement.sessionTimeOutSettings.timeOutSecond"
                                />
                            </div>
                            <div class="mb-5" *ngIf="settings.userManagement.sessionTimeOutSettings.isEnabled">
                                <label class="form-label" for="Setting_ShowTimeOutNotificationSecond">
                                    {{ 'ShowTimeOutNotificationSecond' | localize }}
                                </label>
                                <input
                                    id="Setting_ShowTimeOutNotificationSecond"
                                    type="number"
                                    name="ShowTimeOutNotificationSecond"
                                    class="form-control"
                                    min="1"
                                    [ngClass]="{
                                        edited: settings.userManagement.sessionTimeOutSettings
                                            .showTimeOutNotificationSecond
                                    }"
                                    [(ngModel)]="
                                        settings.userManagement.sessionTimeOutSettings.showTimeOutNotificationSecond
                                    "
                                />
                            </div>
                        </div>
                        <div *ngIf="settings.ldap.isModuleEnabled">
                            <h5 class="mt-4">{{ 'LdapSettings' | localize }}</h5>
                            <label
                                for="Setting_LdapIsEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_LdapIsEnabled"
                                    type="checkbox"
                                    name="LdapIsEnabled"
                                    [(ngModel)]="settings.ldap.isEnabled"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'EnableLdapAuthentication' | localize }}
                                </span>
                            </label>
                            <div class="mb-5" [hidden]="!settings.ldap.isEnabled">
                                <label for="LdapDomainName">{{ 'DomainName' | localize }}</label>
                                <input
                                    id="LdapDomainName"
                                    type="text"
                                    name="LdapDomainName"
                                    class="form-control"
                                    [(ngModel)]="settings.ldap.domain"
                                    maxlength="128"
                                />
                            </div>
                            <div class="mb-5" [hidden]="!settings.ldap.isEnabled">
                                <label for="LdapUserName">{{ 'UserName' | localize }}</label>
                                <input
                                    id="LdapUserName"
                                    type="text"
                                    name="LdapUserName"
                                    class="form-control"
                                    [(ngModel)]="settings.ldap.userName"
                                    maxlength="128"
                                />
                            </div>
                            <div class="mb-5" [hidden]="!settings.ldap.isEnabled">
                                <label for="LdapPassword">{{ 'Password' | localize }}</label>
                                <input
                                    id="LdapPassword"
                                    type="password"
                                    name="LdapPassword"
                                    class="form-control"
                                    [(ngModel)]="settings.ldap.password"
                                    maxlength="128"
                                />
                            </div>
                        </div>
                        <div>
                            <h5 class="mt-4">{{ 'OtherSettings' | localize }}</h5>
                            <label
                                for="Setting_IsEmailConfirmationRequiredForLogin"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_IsEmailConfirmationRequiredForLogin"
                                    type="checkbox"
                                    name="IsEmailConfirmationRequiredForLogin"
                                    [(ngModel)]="settings.userManagement.isEmailConfirmationRequiredForLogin"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'EmailConfirmationRequiredForLogin' | localize }}
                                </span>
                            </label>
                            <h5 class="mt-5">{{ 'Profile' | localize }}</h5>
                            <label
                                for="Setting_AllowUsingGravatarProfilePicture"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_AllowUsingGravatarProfilePicture"
                                    class="form-check-input"
                                    type="checkbox"
                                    name="AllowUsingGravatarProfilePicture"
                                    [(ngModel)]="settings.userManagement.allowUsingGravatarProfilePicture"
                                />
                                <span class="form-check-label">
                                    {{ 'AllowUsingGravatarProfilePicture' | localize }}
                                </span>
                            </label>
                        </div>
                    </tab>
                    <tab class="p-5" *ngIf="true" heading="{{ 'Security' | localize }}">
                        <!-- *ngIf="true" is a workaround for https://github.com/valor-software/ng2-bootstrap/issues/823 -->
                        <div>
                            <h5 class="mt-5">{{ 'PasswordComplexity' | localize }}</h5>
                            <label
                                for="Setting_PasswordComplexity_UseDefaultSettings"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_PasswordComplexity_UseDefaultSettings"
                                    type="checkbox"
                                    name="Setting_PasswordComplexity_UseDefaultSettings"
                                    [(ngModel)]="settings.security.useDefaultPasswordComplexitySettings"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'UseDefaultSettings' | localize }}
                                </span>
                            </label>
                            <div class="px-5">
                                <label
                                    for="Setting_PasswordComplexity_RequireDigit"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Setting_PasswordComplexity_RequireDigit"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireDigit"
                                        [(ngModel)]="settings.security.passwordComplexity.requireDigit"
                                        *ngIf="!settings.security.useDefaultPasswordComplexitySettings"
                                        class="form-check-input"
                                    />
                                    <input
                                        id="Setting_PasswordComplexity_RequireDigit"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireDigit"
                                        [(ngModel)]="settings.security.defaultPasswordComplexity.requireDigit"
                                        *ngIf="settings.security.useDefaultPasswordComplexitySettings"
                                        disabled
                                        class="form-check-input"
                                    />
                                    <span class="form-check-label">
                                        {{ 'PasswordComplexity_RequireDigit' | localize }}
                                    </span>
                                </label>
                                <label
                                    for="Setting_PasswordComplexity_RequireLowercase"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Setting_PasswordComplexity_RequireLowercase"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireLowercase"
                                        [(ngModel)]="settings.security.passwordComplexity.requireLowercase"
                                        *ngIf="!settings.security.useDefaultPasswordComplexitySettings"
                                        class="form-check-input"
                                    />
                                    <input
                                        id="Setting_PasswordComplexity_RequireLowercase"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireLowercase"
                                        [(ngModel)]="settings.security.defaultPasswordComplexity.requireLowercase"
                                        *ngIf="settings.security.useDefaultPasswordComplexitySettings"
                                        disabled
                                        class="form-check-input"
                                    />
                                    <span class="form-check-label">
                                        {{ 'PasswordComplexity_RequireLowercase' | localize }}
                                    </span>
                                </label>
                                <label
                                    for="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                        [(ngModel)]="settings.security.passwordComplexity.requireNonAlphanumeric"
                                        *ngIf="!settings.security.useDefaultPasswordComplexitySettings"
                                        class="form-check-input"
                                    />
                                    <input
                                        id="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                        [(ngModel)]="settings.security.defaultPasswordComplexity.requireNonAlphanumeric"
                                        *ngIf="settings.security.useDefaultPasswordComplexitySettings"
                                        disabled
                                        class="form-check-input"
                                    />
                                    <span class="form-check-label">
                                        {{ 'PasswordComplexity_RequireNonAlphanumeric' | localize }}
                                    </span>
                                </label>
                                <label
                                    for="Setting_PasswordComplexity_RequireUppercase"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Setting_PasswordComplexity_RequireUppercase"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireUppercase"
                                        [(ngModel)]="settings.security.passwordComplexity.requireUppercase"
                                        *ngIf="!settings.security.useDefaultPasswordComplexitySettings"
                                        class="form-check-input"
                                    />
                                    <input
                                        id="Setting_PasswordComplexity_RequireUppercase"
                                        type="checkbox"
                                        name="Setting_PasswordComplexity_RequireUppercase"
                                        [(ngModel)]="settings.security.defaultPasswordComplexity.requireUppercase"
                                        *ngIf="settings.security.useDefaultPasswordComplexitySettings"
                                        disabled
                                        class="form-check-input"
                                    />
                                    <span class="form-check-label">
                                        {{ 'PasswordComplexity_RequireUppercase' | localize }}
                                    </span>
                                </label>
                                <div class="mb-5">
                                    <label class="form-label">
                                        {{ 'PasswordComplexity_RequiredLength' | localize }}
                                    </label>
                                    <input
                                        type="number"
                                        name="RequiredLength"
                                        min="{{ settings.security.passwordComplexity.allowedMinimumLength }}"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.security.passwordComplexity.requiredLength }"
                                        [(ngModel)]="settings.security.passwordComplexity.requiredLength"
                                        *ngIf="!settings.security.useDefaultPasswordComplexitySettings"
                                    />
                                    <input
                                        type="number"
                                        name="RequiredLength"
                                        class="form-control"
                                        [ngClass]="{
                                            edited: settings.security.defaultPasswordComplexity.requiredLength
                                        }"
                                        [(ngModel)]="settings.security.defaultPasswordComplexity.requiredLength"
                                        *ngIf="settings.security.useDefaultPasswordComplexitySettings"
                                        disabled
                                    />
                                </div>
                            </div>
                        </div>
                        <div>
                            <h5 class="mt-5">{{ 'UserLockOut' | localize }}</h5>
                            <label
                                for="Setting_UserLockOut_IsEnabled"
                                class="form-check form-check-custom form-check-solid py-1 mb-5"
                            >
                                <input
                                    id="Setting_UserLockOut_IsEnabled"
                                    type="checkbox"
                                    name="Setting_UserLockOut_IsEnabled"
                                    [(ngModel)]="settings.security.userLockOut.isEnabled"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'EnableUserAccountLockingOnFailedLoginAttempts' | localize }}
                                </span>
                            </label>
                            <div class="mb-5" *ngIf="settings.security.userLockOut.isEnabled">
                                <label class="form-label" for="MaxFailedAccessAttemptsBeforeLockout">
                                    {{ 'MaxFailedAccessAttemptsBeforeLockout' | localize }}
                                </label>
                                <input
                                    id="MaxFailedAccessAttemptsBeforeLockout"
                                    type="number"
                                    name="MaxFailedAccessAttemptsBeforeLockout"
                                    class="form-control"
                                    [ngClass]="{
                                        edited: settings.security.userLockOut.maxFailedAccessAttemptsBeforeLockout
                                    }"
                                    [(ngModel)]="settings.security.userLockOut.maxFailedAccessAttemptsBeforeLockout"
                                />
                            </div>
                            <div class="mb-5" *ngIf="settings.security.userLockOut.isEnabled">
                                <label class="form-label" for="DefaultAccountLockoutSeconds">
                                    {{ 'DefaultAccountLockoutDurationAsSeconds' | localize }}
                                </label>
                                <input
                                    id="DefaultAccountLockoutSeconds"
                                    type="number"
                                    name="DefaultAccountLockoutSeconds"
                                    class="form-control"
                                    [ngClass]="{
                                        edited: settings.security.userLockOut.defaultAccountLockoutSeconds
                                    }"
                                    [(ngModel)]="settings.security.userLockOut.defaultAccountLockoutSeconds"
                                />
                            </div>
                        </div>
                        <div *ngIf="!isMultiTenancyEnabled || settings.security.twoFactorLogin.isEnabledForApplication">
                            <h5 class="mt-5">{{ 'TwoFactorLogin' | localize }}</h5>
                            <label
                                for="Setting_TwoFactorLogin_IsEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_TwoFactorLogin_IsEnabled"
                                    type="checkbox"
                                    name="Setting_TwoFactorLogin_IsEnabled"
                                    [(ngModel)]="settings.security.twoFactorLogin.isEnabled"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'EnableTwoFactorLogin' | localize }}
                                </span>
                            </label>
                            <label
                                for="Setting_TwoFactorLogin_IsEmailProviderEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                                *ngIf="settings.security.twoFactorLogin.isEnabled && !isMultiTenancyEnabled"
                            >
                                <input
                                    id="Setting_TwoFactorLogin_IsEmailProviderEnabled"
                                    type="checkbox"
                                    name="Setting_TwoFactorLogin_IsEmailProviderEnabled"
                                    [(ngModel)]="settings.security.twoFactorLogin.isEmailProviderEnabled"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'IsEmailVerificationEnabled' | localize }}
                                </span>
                            </label>
                            <label
                                for="Setting_TwoFactorLogin_IsSmsProviderEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                                *ngIf="settings.security.twoFactorLogin.isEnabled && !isMultiTenancyEnabled"
                            >
                                <input
                                    id="Setting_TwoFactorLogin_IsSmsProviderEnabled"
                                    type="checkbox"
                                    name="Setting_TwoFactorLogin_IsSmsProviderEnabled"
                                    [(ngModel)]="settings.security.twoFactorLogin.isSmsProviderEnabled"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'IsSmsVerificationEnabled' | localize }}
                                </span>
                            </label>
                            <label
                                for="Setting_TwoFactorLogin_IsGoogleAuthenticatorEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                                *ngIf="settings.security.twoFactorLogin.isEnabled && !isMultiTenancyEnabled"
                            >
                                <input
                                    id="Setting_TwoFactorLogin_IsGoogleAuthenticatorEnabled"
                                    type="checkbox"
                                    name="Setting_TwoFactorLogin_IsGoogleAuthenticatorEnabled"
                                    [(ngModel)]="settings.security.twoFactorLogin.isGoogleAuthenticatorEnabled"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'IsGoogleAuthenticatorEnabled' | localize }}
                                </span>
                            </label>
                            <label
                                for="Setting_TwoFactorLogin_IsRememberBrowserEnabled"
                                class="form-check form-check-custom form-check-solid py-1"
                                *ngIf="settings.security.twoFactorLogin.isEnabled"
                            >
                                <input
                                    id="Setting_TwoFactorLogin_IsRememberBrowserEnabled"
                                    type="checkbox"
                                    name="Setting_TwoFactorLogin_IsRememberBrowserEnabled"
                                    [(ngModel)]="settings.security.twoFactorLogin.isRememberBrowserEnabled"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'AllowToRememberBrowserForTwoFactorLogin' | localize }}
                                </span>
                            </label>
                        </div>
                        <div *ngIf="!isMultiTenancyEnabled">
                            <h5 class="mt-5">{{ 'OneConcurrentLoginPerUser' | localize }}</h5>
                            <label
                                for="Setting_IsOneConcurrentLoginPerUserActive"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Setting_IsOneConcurrentLoginPerUserActive"
                                    type="checkbox"
                                    name="Setting_IsOneConcurrentLoginPerUserActive"
                                    [(ngModel)]="settings.security.allowOneConcurrentLoginPerUser"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'OneConcurrentLoginPerUserActive' | localize }}
                                </span>
                            </label>
                        </div>
                    </tab>
                    <!-- <tab
                        class="p-5"
                        heading="{{ 'EmailSmtp' | localize }}"
                        *ngIf="!isMultiTenancyEnabled || appSession.application.allowTenantsToChangeEmailSettings"
                    >
                        <div class="mb-5 m-form__group" *ngIf="isMultiTenancyEnabled">
                            <label
                                for="Settings_UseHostDefaultEmailSettings"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Settings_UseHostDefaultEmailSettings"
                                    type="checkbox"
                                    name="UseHostDefaultEmailSettings"
                                    [(ngModel)]="settings.email.useHostDefaultEmailSettings"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'UseHostDefaultEmailSettings' | localize }}
                                </span>
                            </label>
                        </div>
                        <div [hidden]="settings.email.useHostDefaultEmailSettings">
                            <form class="form" #emailSmtpSettingsForm="ngForm" method="post">
                                <div class="mb-5">
                                    <label for="DefaultFromAddress">{{ 'DefaultFromAddress' | localize }}</label>
                                    <input
                                        id="DefaultFromAddress"
                                        type="email"
                                        name="DefaultFromAddress"
                                        #defaultFromAddressInput="ngModel"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.email.defaultFromAddress }"
                                        [(ngModel)]="settings.email.defaultFromAddress"
                                        maxlength="128"
                                        email
                                    />
                                    <validation-messages [formCtrl]="defaultFromAddressInput"></validation-messages>
                                </div>
                                <div class="mb-5">
                                    <label for="DefaultFromDisplayName">
                                        {{ 'DefaultFromDisplayName' | localize }}
                                    </label>
                                    <input
                                        id="DefaultFromDisplayName"
                                        type="text"
                                        name="DefaultFromDisplayName"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.email.defaultFromDisplayName }"
                                        [(ngModel)]="settings.email.defaultFromDisplayName"
                                        maxlength="128"
                                    />
                                </div>
                                <div class="mb-5">
                                    <label for="SmtpHost">{{ 'SmtpHost' | localize }}</label>
                                    <input
                                        id="SmtpHost"
                                        type="text"
                                        name="SmtpHost"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.email.smtpHost }"
                                        [(ngModel)]="settings.email.smtpHost"
                                        maxlength="64"
                                    />
                                </div>
                                <div class="mb-5">
                                    <label for="SmtpPort">{{ 'SmtpPort' | localize }}</label>
                                    <input
                                        id="SmtpPort"
                                        type="number"
                                        name="SmtpPort"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.email.smtpPort }"
                                        [(ngModel)]="settings.email.smtpPort"
                                        maxlength="5"
                                    />
                                </div>
                            </form>
                            <label
                                for="Settings_SmtpEnableSsl"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Settings_SmtpEnableSsl"
                                    type="checkbox"
                                    name="SmtpEnableSsl"
                                    [(ngModel)]="settings.email.smtpEnableSsl"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'UseSsl' | localize }}
                                </span>
                            </label>
                            <label
                                for="Settings_SmtpUseDefaultCredentials"
                                class="form-check form-check-custom form-check-solid py-1"
                            >
                                <input
                                    id="Settings_SmtpUseDefaultCredentials"
                                    type="checkbox"
                                    name="SmtpUseDefaultCredentials"
                                    [(ngModel)]="settings.email.smtpUseDefaultCredentials"
                                    class="form-check-input"
                                />
                                <span class="form-check-label">
                                    {{ 'UseDefaultCredentials' | localize }}
                                </span>
                            </label>
                            <div class="mb-5" [hidden]="settings.email.smtpUseDefaultCredentials">
                                <label for="SmtpDomainName">{{ 'DomainName' | localize }}</label>
                                <input
                                    id="SmtpDomainName"
                                    type="text"
                                    name="SmtpDomainName"
                                    class="form-control"
                                    [ngClass]="{ edited: settings.email.smtpDomain }"
                                    [(ngModel)]="settings.email.smtpDomain"
                                    maxlength="128"
                                />
                            </div>
                            <div class="mb-5" [hidden]="settings.email.smtpUseDefaultCredentials">
                                <label for="SmtpUserName">{{ 'UserName' | localize }}</label>
                                <input
                                    id="SmtpUserName"
                                    type="text"
                                    name="SmtpUserName"
                                    class="form-control"
                                    [ngClass]="{ edited: settings.email.smtpUserName }"
                                    [(ngModel)]="settings.email.smtpUserName"
                                    maxlength="128"
                                />
                            </div>
                            <div
                                class="mb-5"
                                *ngIf="!setRandomPassword"
                                [hidden]="settings.email.smtpUseDefaultCredentials"
                            >
                                <label for="SmtpPassword">{{ 'Password' | localize }}</label>
                                <input
                                    id="SmtpPassword"
                                    type="password"
                                    name="SmtpPassword"
                                    class="form-control"
                                    [ngClass]="{ edited: settings.email.smtpPassword }"
                                    [(ngModel)]="settings.email.smtpPassword"
                                    maxlength="128"
                                />
                            </div>
                        </div>
                        <hr />
                        <h5 class="mt-5">{{ 'TestEmailSettingsHeader' | localize }}</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <form class="form" #emailSmtpSettingsTestForm="ngForm">
                                    <div class="mb-5">
                                        <input
                                            type="email"
                                            name="testEmailAddress"
                                            #testEmailAddressInput="ngModel"
                                            class="form-control"
                                            [ngClass]="{ edited: testEmailAddress }"
                                            [(ngModel)]="testEmailAddress"
                                            maxlength="256"
                                            email
                                        />
                                        <validation-messages [formCtrl]="testEmailAddressInput"></validation-messages>
                                    </div>
                                </form>
                            </div>
                            <div class="mb-5 col-md-2">
                                <button
                                    class="btn btn-primary"
                                    type="button"
                                    (click)="sendTestEmail()"
                                    [disabled]="!emailSmtpSettingsTestForm.form.valid"
                                >
                                    {{ 'SendTestEmail' | localize }}
                                </button>
                            </div>
                        </div>
                    </tab> -->
                    <tab class="p-5" *ngIf="true" heading="{{ 'Invoice' | localize }}">
                        <!-- *ngIf="true" is a workaround for https://github.com/valor-software/ng2-bootstrap/issues/823 -->
                        <h5 class="mt-5 mb-5">{{ 'InvoiceInformation' | localize }}</h5>
                        <div class="mb-5">
                            <label class="form-label" for="LegalName">{{ 'LegalName' | localize }}</label>
                            <input
                                id="LegalName"
                                type="text"
                                name="legalName"
                                class="form-control"
                                [ngClass]="{ edited: settings.billing.legalName }"
                                [(ngModel)]="settings.billing.legalName"
                                maxlength="64"
                            />
                        </div>
                        <div class="mb-5">
                            <label class="form-label" for="Address">{{ 'Address' | localize }}</label>
                            <textarea
                                id="Address"
                                rows="5"
                                name="address"
                                class="form-control"
                                [ngClass]="{ edited: settings.billing.address }"
                                [(ngModel)]="settings.billing.address"
                                maxlength="256"
                            ></textarea>
                        </div>
                        <div class="mb-5">
                            <label for="taxVatNo">{{ 'Tax/VatNo' | localize }}</label>
                            <input
                                id="taxVatNo"
                                type="text"
                                name="taxVatNo"
                                class="form-control"
                                [ngClass]="{ edited: settings.billing.taxVatNo }"
                                [(ngModel)]="settings.billing.taxVatNo"
                                maxlength="32"
                            />
                        </div>
                    </tab>
                    <tab class="p-5" heading="{{ 'Configurations' | localize }}">
                        <tabset>
                            <tab class="p-5" heading="General" [active]="activeTabIndex == 0">
                                <div class="row">
                                    <div class="col-lg-4 mb-5">
                                        <label
                                            for="isPhase1"
                                            class="form-check form-check-custom form-check-solid py-1"
                                        >
                                            <span class="form-check-label">Select Phase</span>
                                        </label>
                                        <select class="form-select" id="isPhase1" [(ngModel)]="configurations.isPhase1">
                                            <option [value]="true">Phase 1</option>
                                            <option [value]="false">Phase 2</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 mb-5">
                                        <label
                                            for="isPhase1"
                                            class="form-check form-check-custom form-check-solid py-1"
                                        >
                                            <span class="form-check-label">Select Language Type</span>
                                        </label>
                                        <select class="form-select" id="isPhase1" [(ngModel)]="configurations.language">
                                            <option value="single">Single Language</option>
                                            <option value="dual">Dual Language</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 mb-5">
                                        <label
                                            for="tenantType"
                                            class="form-check form-check-custom form-check-solid py-1"
                                        >
                                            <span class="form-check-label">Select Tenant Type</span>
                                        </label>
                                        <select
                                            class="form-select"
                                            id="tenantType"
                                            [(ngModel)]="configurations.additionalData1"
                                        >
                                            <option value="G">Goods</option>
                                            <option value="S">Services</option>
                                            <option value="GS">Goods And Services</option>
                                        </select>
                                    </div>
                                    <div class="form-check mb-5">
                                        <input
                                            class="form-check-input"
                                            type="checkbox"
                                            value=""
                                            id="draftInvoice"
                                            name="draftInvoice"
                                            [(ngModel)]="generateDraft"
                                        />
                                        <label class="form-check-label" for="enableemail">Generate Draft Invoice</label>
                                    </div>
                                </div>
                            </tab>
                            <tab class="p-5" heading="Email">
                                <div>
                                    <div class="form-check mb-5">
                                        <input
                                            class="form-check-input"
                                            type="checkbox"
                                            value=""
                                            id="enableemail"
                                            name="enableemail"
                                            [(ngModel)]="emailCongiguration.isenableemail"


                                        />
                                        <label class="form-check-label" for="enableemail">Enable Email</label>
                                    </div>
                                    <div class="mb-5">
                                        <label for="DefaultFromAddress">
                                            {{ 'DefaultFromAddress' | localize }}
                                        </label>
                                        <input
                                            id="DefaultFromAddress"
                                            type="email"
                                            name="DefaultFromAddress"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.fromAddress"
                                            maxlength="128"
                                            email
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label for="DefaultFromDisplayName">
                                            {{ 'DefaultFromDisplayName' | localize }}
                                        </label>
                                        <input
                                            id="DefaultFromDisplayName"
                                            type="text"
                                            name="DefaultFromDisplayName"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.defaultFromDisplayName"
                                            maxlength="128"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label for="DefaultSubject">Subject</label>
                                        <input
                                            id="DefaultSubject"
                                            type="text"
                                            name="DefaultSubject"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.subject"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label for="DefaultBody">Body</label>
                                        <textarea
                                            id="DefaultBody"
                                            type="text"
                                            name="DefaultBody"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.body"
                                        ></textarea>
                                    </div>
                                    <div class="mb-5">
                                        <label for="SmtpHost">{{ 'SmtpHost' | localize }}</label>
                                        <input
                                            id="SmtpHost"
                                            type="text"
                                            name="SmtpHost"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.smtpHost"
                                            maxlength="64"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label for="SmtpPort">{{ 'SmtpPort' | localize }}</label>
                                        <input
                                            id="SmtpPort"
                                            type="number"
                                            name="SmtpPort"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.smtpPort"
                                            maxlength="5"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label for="SmtpDomainName">{{ 'DomainName' | localize }}</label>
                                        <input
                                            id="SmtpDomainName"
                                            type="text"
                                            name="SmtpDomainName"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.smtpDomain"
                                            maxlength="128"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label for="SmtpUserName">{{ 'UserName' | localize }}</label>
                                        <input
                                            id="SmtpUserName"
                                            type="text"
                                            name="SmtpUserName"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.smtpUserName"
                                            maxlength="128"
                                        />
                                    </div>
                                    <div class="mb-5" *ngIf="!setRandomPassword">
                                        <label for="SmtpPassword">{{ 'Password' | localize }}</label>
                                        <input
                                            id="SmtpPassword"
                                            type="password"
                                            name="SmtpPassword"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.smtpPassword"
                                            maxlength="128"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label for="ccEmails">{{ 'ccEmails' | localize }}</label>
                                        <input
                                            id="ccEmails"
                                            type="text"
                                            name="ccEmails"
                                            class="form-control"
                                            [(ngModel)]="emailCongiguration.ccEmails"
                                            maxlength="128"
                                        />
                                    </div>
                                </div>
                            </tab>
                            <tab class="p-5" heading="Additional Fields">
                                <div class="mb-5">
                                    <label
                                        for="transactionType"
                                        class="form-check form-check-custom form-check-solid py-1"
                                    >
                                        <span class="form-check-label">Select Transaction Type</span>
                                    </label>
                                    <select
                                        class="form-select"
                                        id="transactionType"
                                        [(ngModel)]="configurations.transactionType"
                                    >
                                        <option value="Sales">Sales</option>
                                        <option value="Credit Note">Credit Note</option>
                                        <option value="Debit Note">Debit Note</option>
                                    </select>
                                </div>
                                <div class="mb-5">
                                    <label for="isActive" class="form-check form-check-custom form-check-solid py-1">
                                        <input
                                            id="isActive"
                                            type="checkbox"
                                            name="isActive"
                                            [(ngModel)]="configurations.isActive"
                                            class="form-check-input"
                                        />
                                        <span class="form-check-label">Active</span>
                                    </label>
                                </div>
                                <div class="mb-5">
                                    <label
                                        for="isShipmentEnabled"
                                        class="form-check form-check-custom form-check-solid py-1"
                                    >
                                        <input
                                            id="isShipmentEnabled"
                                            type="checkbox"
                                            name="isShipmentEnabled"
                                            [(ngModel)]="isShipmentEnabled"
                                            class="form-check-input"
                                        />
                                        <span class="form-check-label">Enable Shipment Details</span>
                                    </label>
                                </div>
                                <div class="mb-5">
                                    <button class="btn btn-dark btn-sm" (click)="addField()">Add New Field</button>
                                </div>

                                <div *ngFor="let a of additionalFieldList; let i = index" class="mb-5">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <label for="fieldName">Field Name</label>
                                            <input
                                                id="fieldName{{ i }}"
                                                type="text"
                                                name="fieldName{{ i }}"
                                                class="form-control"
                                                [(ngModel)]="additionalFieldList[i].name"
                                            />
                                        </div>
                                        <div class="col-md-1">
                                            <label for="columnSize">Column Size</label>
                                            <br />
                                            <input
                                                id="columnSize{{ i }}"
                                                type="number"
                                                name="columnSize{{ i }}"
                                                class="form-control"
                                                [(ngModel)]="additionalFieldList[i].col"
                                                max="12"
                                                min="1"
                                            />
                                        </div>
                                        <div class="col-md-3">
                                            <label for="columnSize">Field Type</label>
                                            <select
                                                class="form-select"
                                                id="fieldType{{ i }}"
                                                type="number"
                                                name="fieldType{{ i }}"
                                                [(ngModel)]="additionalFieldList[i].type"
                                            >
                                                <option value="text">Text</option>
                                                <option value="textarea">Text Area</option>
                                                <option value="date">Date</option>
                                            </select>
                                        </div>
                                        <div class="col-md-2">
                                            <label for="columnSize">Required</label>
                                            <input
                                                id="isRequired{{ i }}"
                                                type="checkbox"
                                                name="isRequired{{ i }}"
                                                [(ngModel)]="additionalFieldList[i].isRequired"
                                                class="form-check-input"
                                                style="margin-left: 5px"
                                            />
                                        </div>
                                        <div class="col-md-3">
                                            <div role="actions" style="text-align: left">
                                                <!-- <span *ngIf="enablecharge==false" style="font-size: 2rem;color:black" class="bi bi-plus-circle" (click)="enablecharges(true)"></span> -->
                                                <span
                                                    style="font-size: 2rem; color: black"
                                                    class="bi bi-x-circle"
                                                    (click)="deleteField(i)"
                                                ></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-5">
                                    <button class="btn btn-success btn-sm" (click)="addConfiguration()">
                                        Add Configuration
                                    </button>
                                </div>
                            </tab>
                        </tabset>

                        <hr />
                        <!-- <h5 class="mt-5">{{ 'TestEmailSettingsHeader' | localize }}</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <form class="form" #emailSmtpSettingsTestForm="ngForm">
                                    <div class="mb-5">
                                        <input
                                            type="email"
                                            name="testEmailAddress"
                                            #testEmailAddressInput="ngModel"
                                            class="form-control"
                                            [ngClass]="{ edited: testEmailAddress }"
                                            [(ngModel)]="testEmailAddress"
                                            maxlength="256"
                                            email
                                        />
                                        <validation-messages [formCtrl]="testEmailAddressInput"></validation-messages>
                                    </div>
                                </form>
                            </div>
                            <div class="mb-5 col-md-2">
                                <button
                                    class="btn btn-primary"
                                    type="button"
                                    (click)="sendTestEmail()"
                                    [disabled]="!emailSmtpSettingsTestForm.form.valid"
                                >
                                    {{ 'SendTestEmail' | localize }}
                                </button>
                            </div>
                        </div> -->

                        <div class="card">
                            <div class="card-body py-3">
                                <div class="table-responsive">
                                    <table class="table table-striped align-middle">
                                        <thead style="text-align: center">
                                            <tr class="fw-bolder text-muted">
                                                <th class="min-w-50px">Sl No</th>
                                                <th class="min-w-100px">Transaction Type</th>
                                                <th class="min-w-100px">Shipment Details</th>
                                                <th class="min-w-100px">Additional Fields</th>
                                                <th class="min-w-150px">Status</th>
                                                <th class="min-w-100px">Edit</th>
                                                <th class="min-w-100px">Delete</th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: center">
                                            <ng-container *ngFor="let it of configurationsList; let i = index">
                                                <tr *ngIf="it?.transactionType != 'General'">
                                                    <td>
                                                        <span
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            {{ i + 1 }}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            {{ it?.transactionType }}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span
                                                            *ngIf="it.shipmentJson == null"
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            Disabled
                                                        </span>
                                                        <span
                                                            *ngIf="it.shipmentJson != null"
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            Enabled
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span
                                                            *ngIf="it.additionalFieldsJson == null"
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            Not configured
                                                        </span>
                                                        <span
                                                            *ngIf="it.additionalFieldsJson != null"
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            Configured
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span
                                                            *ngIf="it.isActive"
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            Active
                                                        </span>
                                                        <span
                                                            *ngIf="!it.isActive"
                                                            class="
                                                                text-dark
                                                                fw-bolder
                                                                text-hover-primary
                                                                d-block
                                                                mb-1
                                                                fs-6
                                                            "
                                                        >
                                                            Inactive
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <button
                                                            class="btn btn-warning btn-sm"
                                                            (click)="editConfiguration(i)"
                                                        >
                                                            Edit
                                                        </button>
                                                    </td>
                                                    <td>
                                                        <button
                                                            class="btn btn-danger btn-sm"
                                                            (click)="deleteConfiguration(i)"
                                                        >
                                                            Delete
                                                        </button>
                                                    </td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="separator separator-dashed my-1"></div>
                        </div>
                    </tab>
                    <tab class="p-5" *ngIf="!isMultiTenancyEnabled" heading="{{ 'OtherSettings' | localize }}">
                        <h5 class="mt-5">{{ 'IsQuickThemeSelectEnabled' | localize }}</h5>
                        <label
                            for="Settings_IsQuickThemeSelectEnabled"
                            class="form-check form-check-custom form-check-solid py-1"
                        >
                            <input
                                id="Settings_IsQuickThemeSelectEnabled"
                                class="form-check-input"
                                type="checkbox"
                                name="IsQuickThemeSelectEnabled"
                                [(ngModel)]="settings.otherSettings.isQuickThemeSelectEnabled"
                            />
                            <span class="form-check-label">
                                {{ 'IsQuickThemeSelectEnabled' | localize }}
                            </span>
                        </label>
                    </tab>
                    <tab
                        class="p-5"
                        *ngIf="enabledSocialLoginSettings && enabledSocialLoginSettings.length"
                        heading="{{ 'ExternalLoginSettings' | localize }}"
                        id="externalLoginSettings"
                    >
                        <tabset class="d-flex flex-column flex-md-row" [vertical]="true" type="pills">
                            <tab *ngIf="isSocialLoginEnabled('Facebook')" class="p-5" heading="Facebook">
                                <label
                                    for="Settings_Facebook_UseHostSettings"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Settings_Facebook_UseHostSettings"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="Settings_Facebook_UseHostSettings"
                                        [(ngModel)]="useFacebookHostSettings"
                                        (change)="clearFacebookSettings()"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseHostSettings' | localize }}
                                    </span>
                                </label>
                                <div *ngIf="!useFacebookHostSettings" class="mt-3">
                                    <label
                                        for="Settings_Facebook_IsDeactivated"
                                        class="form-check form-check-custom form-check-solid py-1"
                                    >
                                        <input
                                            id="Settings_Facebook_IsDeactivated"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="Settings_Facebook_IsDeactivated"
                                            [(ngModel)]="
                                                this.settings.externalLoginProviderSettings.facebook_IsDeactivated
                                            "
                                        />
                                        <span class="form-check-label">
                                            {{ 'Deactivate' | localize }}
                                        </span>
                                    </label>
                                    <span class="form-text text-muted">
                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                    </span>
                                    <div class="mb-5 mt-3">
                                        <label class="form-label" for="Setting_Facebook_AppId">
                                            {{ 'AppId' | localize }}*
                                        </label>
                                        <input
                                            id="Setting_Facebook_AppId"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.facebook.appId"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label">{{ 'AppSecret' | localize }}*</label>
                                        <password-input-with-show-button
                                            [(data)]="settings.externalLoginProviderSettings.facebook.appSecret"
                                        ></password-input-with-show-button>
                                    </div>
                                </div>
                            </tab>

                            <tab *ngIf="isSocialLoginEnabled('Google')" class="p-5" heading="Google">
                                <label
                                    for="Settings_Google_UseHostSettings"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Settings_Google_UseHostSettings"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="Settings_Google_UseHostSettings"
                                        [(ngModel)]="useGoogleHostSettings"
                                        (change)="clearGoogleSettings()"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseHostSettings' | localize }}
                                    </span>
                                </label>
                                <div *ngIf="!useGoogleHostSettings" class="mt-3">
                                    <label
                                        for="Settings_Google_IsDeactivated"
                                        class="form-check form-check-custom py-1"
                                    >
                                        <input
                                            id="Settings_Google_IsDeactivated"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="Settings_Google_IsDeactivated"
                                            [(ngModel)]="
                                                this.settings.externalLoginProviderSettings.google_IsDeactivated
                                            "
                                        />
                                        <span class="form-check-label">
                                            {{ 'Deactivate' | localize }}
                                        </span>
                                    </label>
                                    <span class="form-text text-muted">
                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                    </span>
                                    <div class="mb-5 mt-3">
                                        <label class="form-label" for="Setting_Google_ClientId">
                                            {{ 'ClientId' | localize }}*
                                        </label>
                                        <input
                                            id="Setting_Google_ClientId"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.google.clientId"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label">{{ 'ClientSecret' | localize }}*</label>
                                        <password-input-with-show-button
                                            [(data)]="settings.externalLoginProviderSettings.google.clientSecret"
                                        ></password-input-with-show-button>
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_Google_UserInfoEndpoint">
                                            {{ 'UserInfoEndpoint' | localize }} *
                                        </label>
                                        <input
                                            id="Setting_Google_UserInfoEndpoint"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.google.userInfoEndpoint"
                                        />
                                    </div>
                                </div>
                            </tab>

                            <tab *ngIf="isSocialLoginEnabled('Microsoft')" class="p-5" heading="Microsoft">
                                <label
                                    for="Settings_Microsoft_UseHostSettings"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Settings_Microsoft_UseHostSettings"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="Settings_Microsoft_UseHostSettings"
                                        [(ngModel)]="useMicrosoftHostSettings"
                                        (change)="clearMicrosoftSettings()"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseHostSettings' | localize }}
                                    </span>
                                </label>
                                <div *ngIf="!useMicrosoftHostSettings" class="mt-3">
                                    <label
                                        for="Settings_Microsoft_IsDeactivated"
                                        class="form-check form-check-custom form-check-solid py-1"
                                    >
                                        <input
                                            id="Settings_Microsoft_IsDeactivated"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="Settings_Microsoft_IsDeactivated"
                                            [(ngModel)]="
                                                this.settings.externalLoginProviderSettings.microsoft_IsDeactivated
                                            "
                                        />
                                        <span class="form-check-label">
                                            {{ 'Deactivate' | localize }}
                                        </span>
                                    </label>
                                    <span class="form-text text-muted">
                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                    </span>
                                    <div class="mb-5 mt-3">
                                        <label class="form-label" for="Setting_Microsoft_ClientId">
                                            {{ 'ClientId' | localize }}*
                                        </label>
                                        <input
                                            id="Setting_Microsoft_ClientId"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.microsoft.clientId"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label">{{ 'ClientSecret' | localize }}*</label>
                                        <password-input-with-show-button
                                            [(data)]="settings.externalLoginProviderSettings.microsoft.clientSecret"
                                        ></password-input-with-show-button>
                                    </div>
                                </div>
                            </tab>

                            <tab *ngIf="isSocialLoginEnabled('WsFederation')" class="p-5" heading="WsFederation">
                                <label
                                    for="Settings_WsFederation_UseHostSettings"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Settings_WsFederation_UseHostSettings"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="Settings_WsFederation_UseHostSettings"
                                        [(ngModel)]="useWsFederationHostSettings"
                                        (change)="clearWsFederationSettings()"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseHostSettings' | localize }}
                                    </span>
                                </label>
                                <div [class.d-none]="useWsFederationHostSettings" class="mt-3">
                                    <label
                                        for="Settings_WsFederation_IsDeactivated"
                                        class="form-check form-check-custom form-check-solid py-1"
                                    >
                                        <input
                                            id="Settings_WsFederation_IsDeactivated"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="Settings_WsFederation_IsDeactivated"
                                            [(ngModel)]="
                                                this.settings.externalLoginProviderSettings.wsFederation_IsDeactivated
                                            "
                                        />
                                        <span class="form-check-label">
                                            {{ 'Deactivate' | localize }}
                                        </span>
                                    </label>
                                    <span class="form-text text-muted">
                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                    </span>
                                    <div class="mb-5 mt-3">
                                        <label class="form-label" for="Setting_WsFederation_ClientId">
                                            {{ 'ClientId' | localize }}
                                        </label>
                                        <input
                                            id="Setting_WsFederation_ClientId"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.wsFederation.clientId"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_WsFederation_Tenant">
                                            {{ 'Tenant' | localize }}
                                        </label>
                                        <input
                                            id="Setting_WsFederation_Tenant"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.wsFederation.tenant"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_WsFederation_MetaDataAddress">
                                            {{ 'MetaDataAddress' | localize }}
                                        </label>
                                        <input
                                            id="Setting_WsFederation_MetaDataAddress"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="
                                                settings.externalLoginProviderSettings.wsFederation.metaDataAddress
                                            "
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_WsFederation_Wtrealm">
                                            {{ 'Wtrealm' | localize }}
                                        </label>
                                        <input
                                            id="Setting_WsFederation_Wtrealm"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.wsFederation.wtrealm"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_WsFederation_Authority">
                                            {{ 'Authority' | localize }}
                                        </label>
                                        <input
                                            id="Setting_WsFederation_Authority"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.wsFederation.authority"
                                        />
                                    </div>
                                    <key-value-list-manager
                                        #wsFederationClaimsMappingManager
                                        [header]="l('ClaimsMapping')"
                                        [keyPlaceHolder]="l('ClaimKey')"
                                        [valuePlaceHolder]="l('ClaimValue')"
                                        [items]="wsFederationClaimMappings"
                                    ></key-value-list-manager>
                                </div>
                            </tab>

                            <tab *ngIf="isSocialLoginEnabled('OpenId')" class="p-5" heading="OpenId">
                                <label
                                    for="Settings_OpenIdConnect_UseHostSettings"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Settings_OpenIdConnect_UseHostSettings"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="Settings_OpenIdConnect_UseHostSettings"
                                        [(ngModel)]="useOpenIdConnectHostSettings"
                                        (change)="clearOpenIdSettings()"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseHostSettings' | localize }}
                                    </span>
                                </label>
                                <div [class.d-none]="useOpenIdConnectHostSettings" class="mt-3">
                                    <label
                                        for="Settings_OpenIdConnect_IsDeactivated"
                                        class="form-check form-check-custom form-check-solid py-1"
                                    >
                                        <input
                                            id="Settings_OpenIdConnect_IsDeactivated"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="Settings_OpenIdConnect_IsDeactivated"
                                            [(ngModel)]="
                                                this.settings.externalLoginProviderSettings.openIdConnect_IsDeactivated
                                            "
                                        />
                                        <span class="form-check-label">
                                            {{ 'Deactivate' | localize }}
                                        </span>
                                    </label>
                                    <span class="form-text text-muted">
                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                    </span>
                                    <div class="mb-5 mt-3">
                                        <label class="form-label" for="Setting_OpenIdConnect_ClientId">
                                            {{ 'ClientId' | localize }}
                                        </label>
                                        <input
                                            id="Setting_OpenIdConnect_ClientId"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.openIdConnect.clientId"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_OpenIdConnect_ClientSecret">
                                            {{ 'ClientSecret' | localize }}
                                        </label>
                                        <input
                                            id="Setting_OpenIdConnect_ClientSecret"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="
                                                settings.externalLoginProviderSettings.openIdConnect.clientSecret
                                            "
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_OpenIdConnect_Authority">
                                            {{ 'Authority' | localize }}
                                        </label>
                                        <input
                                            id="Setting_OpenIdConnect_Authority"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.openIdConnect.authority"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label" for="Setting_OpenIdConnect_LoginUrl">
                                            {{ 'LoginUrl' | localize }}
                                        </label>
                                        <input
                                            id="Setting_OpenIdConnect_LoginUrl"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.openIdConnect.loginUrl"
                                        />
                                    </div>
                                    <label
                                        for="Setting_OpenIdConnect_ValidateIssuer"
                                        class="form-check form-check-custom form-check-solid mb-3"
                                        style="margin-bottom: 0"
                                    >
                                        <input
                                            id="Setting_OpenIdConnect_ValidateIssuer"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="AllowSelfRegistration"
                                            [(ngModel)]="
                                                settings.externalLoginProviderSettings.openIdConnect.validateIssuer
                                            "
                                        />
                                        <span class="form-check-label">
                                            {{ 'ValidateIssuer' | localize }}
                                        </span>
                                    </label>
                                    <div class="mb-5 mt-5">
                                        <label class="form-label">{{ 'ResponseType' | localize }}</label>
                                        <div class="checkbox-inline d-flex">
                                            <label
                                                for="Setting_OpenIdConnect_ResponseType_Code"
                                                class="form-check form-check-custom form-check-solid mb-3 me-3"
                                                style="margin-bottom: 0"
                                            >
                                                <input
                                                    id="Setting_OpenIdConnect_ResponseType_Code"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Setting_OpenIdConnect_ResponseType_Code"
                                                    [(ngModel)]="openIdConnectResponseTypeCode"
                                                />
                                                <span class="form-check-label">code</span>
                                            </label>

                                            <label
                                                for="Setting_OpenIdConnect_ResponseType_Token"
                                                class="form-check form-check-custom form-check-solid mb-3 me-3"
                                                style="margin-bottom: 0"
                                            >
                                                <input
                                                    id="Setting_OpenIdConnect_ResponseType_Token"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Setting_OpenIdConnect_ResponseType_Token"
                                                    [(ngModel)]="openIdConnectResponseTypeToken"
                                                />
                                                <span class="form-check-label">token</span>
                                            </label>

                                            <label
                                                for="Setting_OpenIdConnect_ResponseType_IdToken"
                                                class="form-check form-check-custom form-check-solid mb-3"
                                                style="margin-bottom: 0"
                                            >
                                                <input
                                                    id="Setting_OpenIdConnect_ResponseType_IdToken"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Setting_OpenIdConnect_ResponseType_IdToken"
                                                    [(ngModel)]="openIdConnectResponseTypeIdToken"
                                                />
                                                <span class="form-check-label">id_token</span>
                                            </label>
                                        </div>
                                        <small>{{ 'ResponseType_Description' | localize }}</small>
                                    </div>

                                    <key-value-list-manager
                                        #openIdConnectClaimsMappingManager
                                        [header]="l('ClaimsMapping')"
                                        [keyPlaceHolder]="l('ClaimKey')"
                                        [valuePlaceHolder]="l('ClaimValue')"
                                        [items]="openIdConnectClaimMappings"
                                    ></key-value-list-manager>
                                </div>
                            </tab>

                            <tab *ngIf="isSocialLoginEnabled('Twitter')" class="p-5" heading="Twitter">
                                <label
                                    for="Settings_Twitter_UseHostSettings"
                                    class="form-check form-check-custom form-check-solid py-1"
                                >
                                    <input
                                        id="Settings_Twitter_UseHostSettings"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="Settings_Twitter_UseHostSettings"
                                        [(ngModel)]="useTwitterHostSettings"
                                        (change)="clearTwitterSettings()"
                                    />
                                    <span class="form-check-label">
                                        {{ 'UseHostSettings' | localize }}
                                    </span>
                                </label>
                                <div *ngIf="!useTwitterHostSettings" class="mt-3">
                                    <label
                                        for="Settings_Twitter_IsDeactivated"
                                        class="form-check form-check-custom form-check-solid py-1"
                                    >
                                        <input
                                            id="Settings_Twitter_IsDeactivated"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="Settings_Twitter_IsDeactivated"
                                            [(ngModel)]="
                                                this.settings.externalLoginProviderSettings.twitter_IsDeactivated
                                            "
                                        />
                                        <span class="form-check-label">
                                            {{ 'Deactivate' | localize }}
                                        </span>
                                    </label>
                                    <span class="form-text text-muted">
                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                    </span>
                                    <div class="mb-5 mt-3">
                                        <label class="form-label" for="Setting_Twitter_ConsumerKey">
                                            {{ 'ConsumerKey' | localize }}*
                                        </label>
                                        <input
                                            id="Setting_Twitter_ConsumerKey"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="settings.externalLoginProviderSettings.twitter.consumerKey"
                                        />
                                    </div>
                                    <div class="mb-5">
                                        <label class="form-label">{{ 'ConsumerSecret' | localize }}*</label>
                                        <password-input-with-show-button
                                            [(data)]="settings.externalLoginProviderSettings.twitter.consumerSecret"
                                        ></password-input-with-show-button>
                                    </div>
                                </div>
                            </tab>
                        </tabset>
                    </tab>
                </tabset>
            </div>
            <div role="actions" class="card-footer">
                <button class="btn btn-primary ms-5" (click)="saveAll()">
                    <i class="la la-floppy-o"></i>
                    {{ 'SaveAll' | localize }}
                </button>
            </div>
        </div>
    </div>
</div>
